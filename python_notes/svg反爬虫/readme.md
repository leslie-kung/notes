### SVG 映射反爬虫绕过实战 
 
#### 网址
[http://www.porters.vip/confusion/food.html](http://www.porters.vip/confusion/food.html)

#### 任务
爬取美食商家评价网站页面中的商家联系电话、店铺地址和评分数据

#### svg 简介
- SVG 是用于描述二维矢量图形的一种图形格式。它基于 XML 描述图形，对图形进行放大或缩小操作都不会影响图形质量。矢量图形的这个特点使得它被广泛应用在 Web 网站中。
- 接下来我们要了解的反爬虫手段正是利用 SVG 实现的，这种反爬虫手段用矢量图形代替具体的文字，不会影响用户正常阅读，但爬虫程序却无法像读取文字那样获得 SVG 图形中的内容。由于 SVG 中的图形代表的也是一个个文字，所以在使用时必须在后端或前端将真实的文字与对应的 SVG 图形进行映射和替换，这种反爬虫手段被称为 SVG 映射反爬虫。
- 坐标规则

    - 以页面的左上角为零坐标点，即坐标值为 (0, 0)
    - 坐标以像素为单位
    - x 轴的正方向为从左到右，y 轴的正方向是从上到下
    - n 个字符可以有 n 个位置参数
- 如果字符数量大于位置参数数量，那么没有位置参数的字符将以最后一个位置参数为零坐标点，并按原文顺序排列

#### 分析
- 映射关系不可能凭空出现，一定使用了某种技术特性。HTML 中与标签 class 属性相关的只有 JavaScript 和 CSS。
- 找到对应的css文件和svg文件，分析坐标的算法
- 假设字符大小为 14 px，那么 SVG 的计算规则如下

    - 字符在x轴中心点的计算规则为：字符大小除以2，再加字符的x轴起点位置参数，即14÷2+0 等于 7
    - 字符在 y 轴中心点的计算规则为：y 轴高度减字符 y 轴起点减字符大小，其值除以 2 后加上字符 y 轴起点位置参数，最后再加上字符大小数值的一半








